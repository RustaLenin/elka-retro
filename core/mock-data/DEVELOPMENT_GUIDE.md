# Руководство по разработке с мок-данными

## Рекомендации

### Для локальной разработки: Мок-данные

**Плюсы:**
- ✅ Не нужен доступ к продакшен базе
- ✅ Быстрая настройка (один клик)
- ✅ Портативность проекта
- ✅ Контролируемые данные для тестирования
- ✅ Можно легко сбросить и переустановить

**Минусы:**
- ❌ Нет реальных изображений (можно использовать placeholder)
- ❌ Нужно поддерживать актуальность структуры данных

### Для финального тестирования: Экспорт из прода

**Плюсы:**
- ✅ Реальные изображения
- ✅ Реальные категории и структура
- ✅ Реальные данные пользователей (если нужно)

**Минусы:**
- ❌ Нужен доступ к продакшен базе
- ❌ Большой размер данных
- ❌ Нужно синхронизировать изменения структуры

## Гибридный подход (рекомендуется)

### 1. Базовая разработка: мок-данные

Используйте мок-данные для:
- Разработки компонентов
- Тестирования UI/UX
- Демонстрации функционала
- Передачи проекта другим разработчикам

### 2. Финальное тестирование: экспорт

Используйте экспорт для:
- Финальной проверки перед релизом
- Тестирования с реальными данными
- Проверки производительности

### 3. Переключение через константу

```php
// wp-config.php
define('ELKARETRO_USE_MOCK_DATA', true); // true = мок, false = реальные данные
```

В коде проверяйте:

```php
if (defined('ELKARETRO_USE_MOCK_DATA') && ELKARETRO_USE_MOCK_DATA) {
    // Логика для мок-данных
} else {
    // Логика для реальных данных
}
```

## Настройка мок-данных

### Шаг 1: Активировать установщик

В `functions.php` раскомментируйте:

```php
require_once( THEME_COR . 'mock-data-installer.php' );
```

### Шаг 2: Включить автоустановку (опционально)

В `core/mock-data-installer.php`:

```php
const ENABLE_AUTO_INSTALL = true;
```

### Шаг 3: Активировать тему

Мок-данные установятся автоматически.

### Шаг 4: Обновить данные (если нужно)

Отредактируйте `core/mock-data/fixtures.php` и переустановите:

```php
ELKARETRO_MOCK_DATA_INSTALLER::uninstall_mock_data();
ELKARETRO_MOCK_DATA_INSTALLER::install_mock_data();
```

## Изображения в мок-данных

### Вариант 1: Placeholder сервисы

```php
$image_url = 'https://via.placeholder.com/800x600?text=Toy+Image';
```

### Вариант 2: Локальные изображения

1. Создайте `core/mock-data/images/`
2. Поместите изображения
3. Загрузите через `wp_upload_bits()` в fixtures.php

### Вариант 3: Реальные изображения (для демо)

Скопируйте изображения из продакшена:
1. Экспортируйте медиафайлы
2. Загрузите в локальную установку
3. Обновите fixtures.php с реальными attachment ID

## Поддержка актуальности

При изменении структуры данных (новые поля Pods, таксономии):

1. Обновите `WP_DATA_MODEL.md` с новыми полями
2. Обновите `fixtures.php` с новыми данными
3. Увеличьте версию в `get_version()`
4. Переустановите мок-данные

## Для передачи проекта

При передаче проекта другим разработчикам:

1. Убедитесь, что `ENABLE_AUTO_INSTALL = true`
2. Убедитесь, что `functions.php` включает установщик
3. Добавьте инструкцию в README:
   ```markdown
   ## Настройка для разработки
   
   1. Активируйте тему в WordPress
   2. Мок-данные установятся автоматически
   3. Для переустановки: раскомментируйте код установки в functions.php
   ```

## Миграция на реальные данные

Когда готово к продакшену:

1. Отключите установщик в `functions.php` (закомментируйте)
2. Установите `ELKARETRO_USE_MOCK_DATA = false` в `wp-config.php`
3. Импортируйте реальные данные из продакшена
4. Убедитесь, что всё работает

## Troubleshooting

### Мок-данные не устанавливаются

- Проверьте, что установщик подключён в `functions.php`
- Проверьте права доступа к базе данных
- Проверьте логи ошибок WordPress

### Изображения не отображаются

- Используйте placeholder сервисы для быстрой разработки
- Или загрузите реальные изображения вручную
- Проверьте, что attachment ID корректны

### Таксономии не создаются

- Убедитесь, что Pods активирован и таксономии зарегистрированы
- Проверьте, что slug таксономий совпадают с реальными

