# Mock Data для разработки

Этот модуль предоставляет систему установки мок-данных для локальной разработки темы ElkaRetro.

## Преимущества мок-данных

1. **Независимость от продакшена:** Работа без доступа к продакшен базе
2. **Портативность:** Легко передать проект другим разработчикам
3. **Контроль:** Контролируемые данные для тестирования всех сценариев
4. **Быстрая настройка:** Один клик - и всё готово

## Использование

### Автоматическая установка при активации темы

1. Откройте `core/mock-data-installer.php`
2. Измените `ENABLE_AUTO_INSTALL` на `true`:
   ```php
   const ENABLE_AUTO_INSTALL = true;
   ```
3. Активируйте тему в WordPress
4. Мок-данные автоматически установятся

### Ручная установка

Можно установить данные вручную через код:

```php
ELKARETRO_MOCK_DATA_INSTALLER::install_mock_data();
```

### Удаление мок-данных

```php
ELKARETRO_MOCK_DATA_INSTALLER::uninstall_mock_data();
```

## Структура мок-данных

Мок-данные находятся в `core/mock-data/fixtures.php` и включают:

- **Категории игрушек** (`category-of-toys`)
- **Типы игрушек** (`toy_type`) - несколько примеров
- **Экземпляры игрушек** (`toy_instance`) - связанные с типами
- **Таксономии:** года производства, производители, размеры, материалы, и т.д.
- **Посты** (новости) - для блога
- **Страницы** - примеры страниц
- **Медиафайлы** - placeholder изображения (можно заменить на реальные)

## Замена на реальные данные

### Вариант 1: Экспорт/Импорт через WordPress

1. Экспортируйте данные из продакшена через **Tools → Export**
2. Импортируйте через **Tools → Import**
3. Медиафайлы нужно загрузить отдельно (или использовать реальные URL)

### Вариант 2: Прямой SQL импорт

1. Экспортируйте нужные таблицы из продакшена:
   - `wp_posts` (фильтр по post_type)
   - `wp_postmeta`
   - `wp_terms`, `wp_term_taxonomy`, `wp_term_relationships`
   - `wp_posts` для медиафайлов

2. Импортируйте в локальную базу

### Вариант 3: REST API синхронизация (для разработки)

Можно создать скрипт, который будет синхронизировать данные через REST API продакшена.

## Переключение между мок-данными и реальными

Рекомендуется использовать константу в `wp-config.php`:

```php
// wp-config.php
define('ELKARETRO_USE_MOCK_DATA', true); // Использовать мок-данные
```

И проверять в коде:

```php
if (defined('ELKARETRO_USE_MOCK_DATA') && ELKARETRO_USE_MOCK_DATA) {
    // Использовать мок-данные
} else {
    // Использовать реальные данные из базы
}
```

## Изображения

### ✅ Рекомендуемый вариант: Локальные изображения

Система автоматически загружает изображения из папки `core/mock-data/images/` в WordPress медиабиблиотеку.

**Структура папок:**
```
core/mock-data/images/
├── toy-types/          # Изображения типов игрушек
│   ├── baby-rattle.jpg
│   ├── star.jpg
│   └── snowflake.jpg
└── toy-instances/      # Изображения экземпляров
    ├── baby-rattle-instance-1.jpg
    └── baby-rattle-instance-1-gallery-1.jpg
```

**Преимущества:**
- ✅ Работает без интернета
- ✅ Реальные изображения (можно скопировать из прода)
- ✅ Быстрая загрузка
- ✅ Полный контроль над данными

**Как использовать:**
1. Поместите изображения в соответствующие папки
2. В `fixtures.php` укажите путь относительно `images/`:
   ```php
   'image' => 'toy-types/baby-rattle.jpg'
   ```
3. Для галереи используйте массив:
   ```php
   'images' => array(
       'toy-instances/instance-1.jpg',
       'toy-instances/instance-2.jpg'
   )
   ```

**Требования:**
- Форматы: JPG, PNG, GIF, WebP
- Типы игрушек: рекомендуется 16:9 или 1:1
- Экземпляры: рекомендуется 16:9 для основного изображения
- Размер: оптимально 800-1200px по большей стороне

**Если изображение не найдено:**
- Файл будет пропущен с предупреждением в лог
- Пост будет создан без изображения

### Альтернативный вариант: Placeholder изображения

Если локальных изображений нет, можно использовать placeholder сервисы (требует интернет):
- `https://via.placeholder.com/800x600` для изображений 16:9
- Но **рекомендуется использовать локальные изображения** для работы без сети

## Обновление мок-данных

При изменении структуры данных (новые поля, таксономии) нужно:

1. Обновить `fixtures.php` с новыми данными
2. Увеличить версию в `get_version()`
3. Переустановить мок-данные:
   ```php
   ELKARETRO_MOCK_DATA_INSTALLER::uninstall_mock_data();
   ELKARETRO_MOCK_DATA_INSTALLER::install_mock_data();
   ```

## Рекомендации

1. **Для локальной разработки:** Используйте мок-данные
2. **Для финального тестирования:** Используйте экспорт из продакшена
3. **Для демо/презентации:** Используйте мок-данные (контролируемые данные)
4. **Для продакшена:** Всегда реальные данные

