# Фильтр категорий товаров

## Описание

Фильтр категорий позволяет выбрать одну или несколько категорий для отображения соответствующих товаров в каталоге. Категории организованы в виде дерева, где можно раскрывать и сворачивать разделы.

## Основные возможности

### Выбор категорий

- **Одиночный выбор** — установите флажок рядом с названием категории
- **Автоматический выбор дочерних** — при выборе родительской категории автоматически выбираются все её подкатегории
- **Множественный выбор** — можно выбрать несколько категорий одновременно
- **Автоматическое раскрытие** — при выборе родительской категории все её подкатегории автоматически раскрываются

### Навигация по дереву

- **Раскрытие узлов** — нажмите на стрелку справа от категории с подкатегориями, чтобы раскрыть или свернуть список
- **Поиск** — используйте поле поиска вверху фильтра для быстрого нахождения нужной категории
  - Поиск работает по названию категории
  - При поиске автоматически раскрываются пути к найденным категориям
- **Разворот на весь экран** — нажмите на стрелку в правом верхнем углу фильтра, чтобы развернуть его на весь экран
  - При развороте скрываются другие фильтры
  - Показывается полное дерево категорий

### Отображение выбранных категорий

- **Свёрнутое состояние** (по умолчанию):
  - Показываются только выбранные категории и их родительские разделы (для отображения пути)
  - Остальные категории скрыты для удобства
  
- **Развёрнутое состояние**:
  - Показывается полное дерево всех категорий
  - Выбранные категории отмечены флажками

### Информация о категориях

- Рядом с каждой категорией отображается количество доступных товаров в скобках, например: "Игрушки (45)"
- Категории без доступных товаров отображаются серым цветом и недоступны для выбора

### Применение фильтра

- Выбранные категории применяются автоматически при изменении других фильтров или нажатии кнопки "Применить фильтры"
- Список выбранных категорий отображается в виде меток в верхней части каталога
- Можно удалить категорию из фильтра, нажав на крестик в метке

### Сохранение настроек

- Состояние раскрытия узлов дерева сохраняется автоматически
- При следующем посещении каталога дерево категорий будет отображаться в том же состоянии, что и при последнем использовании

## Примеры использования

**Пример 1:** Выбор одной категории
1. Найдите нужную категорию в дереве
2. Установите флажок рядом с названием
3. Категория автоматически применится к фильтрам

**Пример 2:** Выбор категории с подкатегориями
1. Найдите родительскую категорию
2. Установите флажок рядом с её названием
3. Все подкатегории автоматически выберутся и раскроются
4. При необходимости можно снять выбор с отдельных подкатегорий

**Пример 3:** Поиск категории
1. Введите название категории в поле поиска
2. Дерево автоматически отфильтруется
3. Найденные категории и путь к ним будут раскрыты
4. Выберите нужную категорию
5. Очистите поиск для возврата к полному дереву

**Пример 4:** Работа с большим количеством категорий
1. Разверните фильтр на весь экран
2. Просматривайте полное дерево категорий
3. Выбирайте нужные категории
4. Сверните фильтр для возврата к обычному виду

