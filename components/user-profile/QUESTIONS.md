# Вопросы для уточнения требований - User Profile Module

## ⚠️ ВАЖНО: Документация устарела

**Статус:** Эта документация описывает **устаревшие требования** к системе авторизации и регистрации.

**Актуальная документация:** См. `components/cart/AUTH_REGISTRATION.md` для описания текущих проблем и планов на изменение.

**Примечание:** Документация помечена как устаревшая, но сохранена для справки.

---

Список вопросов, на которые нужно получить ответы перед началом реализации функциональности профиля.

## ✅ Авторизация и регистрация

### 1. Механизм авторизации
- [x] Использовать стандартную WordPress авторизацию через REST API? **ДА**
- [x] Нужна ли поддержка OAuth (социальные сети: VK, Google, Яндекс)? **ДА, но не в MVP**
- [x] Нужна ли двухфакторная аутентификация (2FA)? **ДА, но не в MVP**

### 2. Требования к паролю
- [x] Минимальная длина пароля? **16 символов**
- [x] Требования к сложности (заглавные, цифры, спецсимволы)? **Сложный: маленькие буквы, большие буквы, цифры и спецсимволы. Пользователь вводит сам (браузер запомнит)**
- [x] Нужна ли проверка пароля на утечки (Have I Been Pwned)? **НЕТ**

### 3. Регистрация
- [x] Какие поля обязательны при регистрации?
  - [x] Email (обязательно) **ДА**
  - [x] Login (обязательно) **ДА**
  - [x] Phone (обязательно) **ДА**
- [x] Нужна ли верификация email перед активацией аккаунта? **ДА, но не в MVP**
- [x] Нужна ли капча при регистрации? **ДА, но не в MVP**
- [x] Нужна ли модерация новых пользователей? **НЕТ**

### 4. Восстановление пароля
- [x] Использовать стандартный WordPress механизм восстановления? **ДА**
- [x] Нужна ли возможность восстановления через SMS? **НЕТ**
- [x] Требования к времени жизни ссылки восстановления? **Стандартная WordPress**

## ✅ Профиль пользователя

### 5. Поля профиля
- [x] Какие поля профиля обязательны для заполнения? **Email, Login, Phone**
- [x] Какие поля можно редактировать пользователю? **Имя, Фамилия, Email, Phone, Display Name, адрес, ссылка на аккаунт в мессенджере (например телеграмм, макс)**
- [x] Нужна ли возможность загрузки аватара? **ДА, но не в MVP**
- [x] Нужны ли дополнительные поля (дата рождения, пол, город)? **День рождения будет прикольно, но не в MVP**

### 6. Безопасность профиля
- [x] Нужна ли история входов в аккаунт? **НЕТ**
- [x] Нужна ли возможность просмотра активных сессий? **НЕТ**
- [x] Нужна ли возможность удаления аккаунта? **НЕТ, но можно написать, что в соответствие с правилами 152 ФЗ РФ аккаунт будет удалён автоматически через 3 года (срок хранения персональных данных). Нужно запанировать функцию, которая будет это фактически делать.**
- [x] Требования к времени жизни сессии? **Стандартная WP 2 недели**

### 7. Смена email
- [x] Нужна ли верификация нового email перед сменой? **ДА, но не в MVP**
- [x] Что делать со старым email (сохранить как резервный)? **Будем спрашивать у пользователя**

## ✅ История заказов

### 8. Сущность "Заказ"
- [x] Когда планируется реализация сущности "заказ"? **В процессе, наверное сегодня, но несколько позже**
- [x] Какие поля будут в заказе?
  - **Список заказанных экземпляров игрушки**
  - **Список заказанных новогодних аксессуаров**
  - **Адрес доставки**
  - **Предпочитаемая форма оплаты**
  - **Общая сумма заказа**
  - **ID пользователя который оформил заказ**
- [x] Нужна ли интеграция с платежными системами? **ДА, но не в MVP**
- [x] Нужна ли возможность отмены заказа пользователем? **ДА**

### 9. Отображение заказов
- [x] Какие статусы заказов отображать? **Коллега скоро подготовит документацию**
- [x] Нужна ли фильтрация заказов (по статусу, дате, сумме)? **НЕТ, скорее сортировка, старые, новые**
- [x] Нужна ли пагинация для списка заказов? **НЕТ, сделаем подгрузку при скролле**
- [x] Нужна ли возможность повторного заказа? **НЕТ, так как тех же игрушек на сайте не будет**

## ✅ Форма обратной связи

### 10. Отправка сообщений
- [x] Куда отправлять сообщения (email администратора, админ-панель, оба)? **Специальный email zakaz@elka-retro.ru**
- [x] Нужна ли возможность прикреплять файлы к сообщениям? **ДА, но не в MVP**
- [x] Максимальный размер вложений? **10 МБ**
- [x] Какие типы файлов разрешены? **Картинки, PDF**

### 11. История сообщений
- [x] Нужна ли возможность просмотра истории отправленных сообщений? **НЕТ**
- [x] Нужны ли уведомления пользователю об ответе на сообщение? **НЕТ**
- [x] Нужна ли возможность ответа на сообщение прямо в профиле? **НЕТ**
- [x] Нужны ли статусы сообщений (отправлено, прочитано, отвечено)? **НЕТ**

### 12. Приоритеты сообщений
- [x] Нужна ли возможность указать приоритет сообщения? **НЕТ**

## ✅ Интеграция в навигацию

### 13. Хедер сайта
- [x] Где разместить кнопки "Войти" / "Регистрация"? **Иконка в правой части хедера**
- [x] Что показывать для авторизованных пользователей (имя, аватар, меню)? **Кружочек с одной/двумя первым буквами display name**
- [x] Нужно ли выпадающее меню пользователя? **ДА**

### 14. Доступ к профилю
- [x] Какой URL использовать для страницы профиля (`/profile/`, `/account/`, `/my-profile/`)? **profile**
- [x] Нужна ли возможность просмотра публичного профиля других пользователей? **НЕТ**

## ✅ Будущие возможности

### 15. WishList (Избранное)
- [x] Когда планируется реализация? **После MVP**
- [x] Нужна ли возможность создания нескольких списков избранного? **НЕТ**
- [x] Нужна ли возможность поделиться списком избранного? **НЕТ**
- [x] Нужна ли синхронизация между устройствами? **ДА**

### 16. Кастомные запросы
- [x] Когда планируется реализация? **После MVP**
- [x] Какие параметры можно указывать в запросе? **Свободный текст - textarea**
- [x] Нужны ли уведомления о новых товарах, соответствующих запросу? **НЕТ**
- [x] Нужна ли возможность редактирования/удаления запросов? **НЕТ**

### 17. Интеграция с аукционом
- [x] Когда планируется реализация аукциона? **В ближайшие несколько дней**
- [x] Какие данные нужно отображать в профиле (активные ставки, история участия)? **ДА, активные ставки будут полезны**
- [x] Нужны ли уведомления о статусе ставок? **НЕТ**

### 18. Продажа своих экземпляров
- [x] Когда планируется реализация? **Не известно**
- [x] Нужна ли модерация объявлений перед публикацией? **ДА, обязательно**
- [x] Нужна ли возможность редактирования/удаления объявлений? **ДА, обязательно**
- [x] Нужна ли статистика продаж? **ДА, не в MVP**

## ✅ Технические вопросы

### 19. REST API
- [x] Использовать стандартные WordPress REST API endpoints или создать кастомные? **По большей части использовать стандартные, если они подходят**
- [x] Нужна ли версионирование API? **НЕТ**
- [x] Требования к rate limiting? **На уровне nginx, не на уровне JS**

### 20. Безопасность
- [x] Требования к CSRF защите (использовать WordPress nonce)? **ДА, будет не лишним**
- [x] Требования к XSS защите? **Да (стандартная защита WordPress)**
- [x] Нужна ли защита от брутфорса (ограничение попыток входа)? **ДА**

### 21. Производительность
- [x] Требования к кэшированию данных профиля? **Не в MVP**
- [x] Нужна ли ленивая загрузка вкладок профиля? **ДА**
- [x] Требования к времени загрузки страницы профиля? **До 4 сек**

## ✅ UX/UI вопросы

### 22. Дизайн модальных окон
- [x] Есть ли готовый дизайн модальных окон? **Есть готовый компонент в ui-kit**
- [x] Нужны ли анимации открытия/закрытия? **НЕТ**
- [x] Требования к адаптивности (мобильные устройства)? **ДА**

### 23. Уведомления
- [ ] Какой тип уведомлений использовать (toast, inline, модальные)? **Оставим на потом**
- [ ] Нужны ли звуковые уведомления? **Оставим на потом**
- [ ] Нужна ли система уведомлений в профиле (центр уведомлений)? **Оставим на потом**

### 24. Валидация форм
- [ ] Нужна ли валидация в реальном времени (on input)? **Оставим на потом**
- [ ] Нужна ли валидация на сервере в дополнение к клиентской? **Оставим на потом**
- [ ] Какие сообщения об ошибках показывать (общие или детальные)? **Оставим на потом**

## ⏳ Локализация

### 25. Языки
- [ ] Какие языки поддерживать (русский, английский)? **Оставим на потом**
- [ ] Нужна ли автоматическая локализация дат и чисел? **Оставим на потом**

---

## Резюме требований MVP

### Авторизация и регистрация
- ✅ Стандартная WordPress авторизация через REST API
- ✅ Минимум 16 символов, сложный пароль (маленькие/большие буквы, цифры, спецсимволы)
- ✅ Обязательные поля регистрации: Email, Login, Phone
- ✅ Стандартный WordPress механизм восстановления пароля
- ❌ OAuth, 2FA, верификация email, капча - не в MVP

### Профиль
- ✅ Обязательные поля: Email, Login, Phone
- ✅ Редактируемые поля: Имя, Фамилия, Email, Phone, Display Name, адрес, ссылка на мессенджер
- ✅ Автоматическое удаление аккаунта через 3 года (152 ФЗ РФ) - запланировать функцию
- ❌ Аватар, день рождения - не в MVP

### История заказов
- ✅ Будет реализована позже (сегодня, но несколько позже)
- ✅ Поля: список экземпляров игрушек, список аксессуаров, адрес, форма оплаты, сумма, ID пользователя
- ✅ Сортировка: старые/новые
- ✅ Подгрузка при скролле
- ✅ Возможность отмены заказа
- ❌ Интеграция с платежами - не в MVP

### Форма обратной связи
- ✅ Отправка на email: zakaz@elka-retro.ru
- ✅ Простая форма (тема, текст)
- ❌ Прикрепление файлов, история сообщений - не в MVP

### Интеграция в навигацию
- ✅ Иконка в правой части хедера
- ✅ Кружочек с первыми буквами display name для авторизованных
- ✅ Выпадающее меню пользователя
- ✅ URL: `/profile/`

### Безопасность
- ✅ WordPress nonce для CSRF защиты
- ✅ Защита от брутфорса
- ✅ Стандартная XSS защита WordPress

### Производительность
- ✅ Ленивая загрузка вкладок
- ✅ Время загрузки до 4 сек
- ✅ Адаптивность

---

**Примечание:** Документация обновлена с учётом ответов. Готовы к началу реализации MVP.
